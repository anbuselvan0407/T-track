<div class="ticket-container">
  <div class="left">
    <div class="box-border">

      <mat-card class="example-card1" appearance="outlined">
        <mat-card-header>
          <mat-card-title><h2>Tickets</h2></mat-card-title>
        </mat-card-header>
        <mat-card-content>

          <mat-card class="example-card total"
          appearance="outlined"
          [class.active]="selectedStatus === ''"
          (click)="filterByStatus('')">
          <mat-card-header>
            <mat-card-title-group>
              <mat-card-title>Total</mat-card-title>
              <p>{{ ticketCounts.total }}</p>
            </mat-card-title-group>
          </mat-card-header>
          <mat-card-content>
            <mat-card-subtitle>Total number of tickets are available</mat-card-subtitle>
          </mat-card-content>
        </mat-card>


        <mat-card class="example-card in-progress"
        appearance="outlined"
        [class.active]="selectedStatus === 'In Progress'"
        (click)="filterByStatus('In Progress')">
        <mat-card-header>
          <mat-card-title-group>
            <mat-card-title>In-Progress</mat-card-title>
            <p>{{ ticketCounts.inProgress }}</p>
          </mat-card-title-group>
  </mat-card-header>
  <mat-card-content>
    <mat-card-subtitle>Total number of tickets in "In Progress" status </mat-card-subtitle>
  </mat-card-content>
</mat-card>

<mat-card class="example-card in-review"
appearance="outlined"
[class.active]="selectedStatus === 'In Review'"
(click)="filterByStatus('In Review')">
<mat-card-header>
    <mat-card-title-group>
      <mat-card-title>In-Review</mat-card-title>
      <p>{{ ticketCounts.inReview }}</p>
    </mat-card-title-group>
  </mat-card-header>
  <mat-card-content>
    <mat-card-subtitle>Total number of tickets currently in "In Review" status</mat-card-subtitle>
  </mat-card-content>
</mat-card>

<mat-card class="example-card done"
appearance="outlined"
[class.active]="selectedStatus === 'Done'"
(click)="filterByStatus('Done')">
<mat-card-header>

  <mat-card-title-group>
    <mat-card-title>Done</mat-card-title>
    <p>{{ ticketCounts.done }}</p>
  </mat-card-title-group>
</mat-card-header>
<mat-card-content>
  <mat-card-subtitle>Total number of tickets in "Done" status</mat-card-subtitle>
</mat-card-content>
</mat-card>


</mat-card-content>

</mat-card>

</div>
</div>

<div class="right">
  <div class="table-toolbar">
    <div class="search-bar">

      <mat-form-field appearance="outline" class="search-form-field">
        <mat-label>Search</mat-label>
        <input matInput (keyup)="applyGlobalFilter($event)" placeholder="Search by columns" />
      </mat-form-field>

    </div>

    <mat-form-field *ngIf="isAdmin" appearance="outline" class="small-form-field" style="background-color: aliceblue;">
      <mat-label [class.clicked]="isClicked">Filter</mat-label>
      <mat-select [(value)]="selectedUser" (selectionChange)="applyFilter()">
        <mat-option value="">all</mat-option>
        <mat-option *ngFor="let user of users" [value]="user">{{ user }}</mat-option>
      </mat-select>
    </mat-form-field>






    <button class="create-ticket" mat-raised-button color="primary" (click)="openCreateTicketDialog()">
      Create Ticket
    </button>
  </div>


  <div class="table-wrapper">
    <div class="table-responsive-wrapper">
      <table class="table" mat-table [dataSource]="dataSource">
        <!-- ID Column -->
        <ng-container matColumnDef="id">
          <th mat-header-cell *matHeaderCellDef> ID </th>
          <td mat-cell *matCellDef="let element"> {{ element._id }} </td>
        </ng-container>

        <!-- Title Column -->
        <ng-container matColumnDef="title">
          <th mat-header-cell *matHeaderCellDef> Title </th>
          <td mat-cell *matCellDef="let ticket" class="ticket-column"> {{ ticket.title }} </td>
        </ng-container>

        <!-- Description Column -->
        <ng-container matColumnDef="description">
          <th mat-header-cell *matHeaderCellDef> Description </th>
          <td mat-cell *matCellDef="let ticket" class="description-column"> {{ ticket.description }} </td>
        </ng-container>

        <!-- Created By Column -->
        <ng-container matColumnDef="createdBy">
          <th mat-header-cell *matHeaderCellDef> Created By </th>
          <td mat-cell *matCellDef="let ticket"> {{ ticket.createdBy }} </td>
        </ng-container>

        <!-- Status Column -->
        <ng-container matColumnDef="status">
          <th mat-header-cell *matHeaderCellDef> Status </th>
          <td mat-cell *matCellDef="let element"> {{ element.status }} </td>
        </ng-container>

        <tr class="header" mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns;" (click)="openTicketDetail(row)">
        </tr>
      </table>
    </div>
  </div>

  <div class="paginator-wrapper">
<mat-paginator
  class="paginator"
  [length]="totalItems"
  [pageSize]="limit"
  [pageSizeOptions]="[5,10, 20]"
  showFirstLastButtons>
</mat-paginator>

  </div>


</div>

</div>
